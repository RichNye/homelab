<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Meal Planner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 2rem; }
    #rows > pre { background: #f6f8fa; padding: 1rem; border-radius: .5rem; overflow: auto; }
    #status { margin-bottom: 1rem; }
    button { cursor: pointer; padding: .6rem 1rem; border-radius: .5rem; border: 1px solid #ccc; background: #fff; }
  </style>
</head>
<body>
  <h1>Meal Planner</h1>

  <div id="status">Loading…</div>
  <div id="rows"></div>
  <p><button id="reload">Give me new meals!</button></p>

  <script>
    // If your API is on the same origin behind a reverse proxy, use a relative path like "/api/recipes".
    // Otherwise point this at the full URL and make sure your API enables CORS for this page's origin.
    const API_URL = "https://meals.rnye.tech/api/recipes"; // e.g. "http://localhost:8080/api/recipes"

    async function load() {
      const status = document.getElementById('status');
      const rows = document.getElementById('rows');
      status.textContent = 'Loading…';
      rows.innerHTML = '';

      try {
        const resp = await fetch(API_URL, { headers: { 'Accept': 'application/json' } });
        if (!resp.ok) throw new Error(`HTTP ${resp.status}`);
        const data = await resp.json();

        const list = Array.isArray(data) ? data : [data];
        if (list.length === 0) {
          status.textContent = 'No data returned.';
          return;
        }

        status.textContent = `Showing ${list.length} meal${list.length === 1 ? '' : 's'}.`;
        for (const item of list) {
          const pre = document.createElement('pre');
          pre.textContent = typeof item === 'object' ? JSON.stringify(item, null, 2) : String(item);
          rows.appendChild(pre);
        }
      } catch (err) {
        status.textContent = `Error: ${err.message}. Check API URL and CORS.`;
      }
    }

    document.getElementById('reload').addEventListener('click', load);
    load();
  </script>
</body>
</html>